<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Image Feedback - Introduction</title>
    <link rel="stylesheet" href="css/style.css">
    <style>
        /* Add specific styles for the intro page if needed */
        body {
            text-align: left; /* Align text left for instructions */
            max-width: 800px; /* Limit width for readability */
            margin: 20px auto; /* Center content */
        }
        #introduction-container {
            background-color: #f8f8f8;
            border: 1px solid #ddd;
            padding: 20px;
            border-radius: 5px;
            margin-bottom: 20px;
        }
        #start-button {
            display: block;
            margin: 20px auto; /* Center the button */
            padding: 12px 25px;
            font-size: 1.1em;
            cursor: pointer; /* Add cursor pointer */
        }
        /* Style the list for better spacing */
        #introduction-container ol {
            padding-left: 20px;
            list-style-position: outside;
        }
        #introduction-container li {
            margin-bottom: 2em; /* Increased space between list items */
            line-height: 1.5; /* Slightly increased line spacing */
            padding-left: 10px; /* Add some padding to list items */
        }
        #introduction-container h2 { /* Style the main heading */
             text-align: center;
             margin-bottom: 1.5em;
        }
        #introduction-container h3 {
            margin-top: 1.5em; /* Space before the steps heading */
            margin-bottom: 1em;
        }
        #introduction-container p {
            line-height: 1.5; /* Improve paragraph line spacing */
            margin-bottom: 1.5em; /* Space after paragraphs */
        }

    </style>
</head>
<body>
    <script>
        (function enforceLambdaParam() {
            const defaultLam = '0.01';
            const url = new URL(window.location.href);
            if (!url.searchParams.has('lam')) {
                const lamValue = url.searchParams.get('lambda') || defaultLam;
                url.searchParams.set('lam', lamValue);
                if (url.searchParams.has('lambda')) {
                    url.searchParams.delete('lambda');
                }
                window.location.replace(url.toString());
                return;
            }
            if (url.searchParams.has('lambda')) {
                url.searchParams.delete('lambda');
                window.history.replaceState(null, '', url.toString());
            }
        })();

        const introUrl = new URL(window.location.href);
        const isQuickMode = introUrl.searchParams.has('quick');

        if (isQuickMode) {
            try {
                sessionStorage.setItem('passwordVerified', 'true');
                sessionStorage.setItem('userConsented', 'true');
            } catch (err) {
                console.warn('Quick mode could not prime sessionStorage on introduction page:', err);
            }

            const queryString = window.location.search;
            window.location.replace(queryString ? `index.html${queryString}` : 'index.html');
        } else {
            let passwordVerified = false;
            try {
                passwordVerified = sessionStorage.getItem('passwordVerified') === 'true';
            } catch (err) {
                console.warn('Unable to read password verification flag from sessionStorage:', err);
            }

            // Check password verification
            if (!passwordVerified) {
                alert("Access denied. Please start from the consent page.");
                const queryString = window.location.search;
                window.location.href = queryString ? `ethics_consent.html${queryString}` : 'ethics_consent.html';
            }
        }
    </script>
    <!-- Title removed, using h2 inside container -->

    <div id="introduction-container">
        <!-- Disclaimer removed, moved to ethics_consent.html -->
        <h2>Instructions</h2>
        <p>Help us teach AI about visual styles.</p>

        <ol>
            <li>
                <strong>Think of a Style:</strong>
                <br><br>
                Mentally pick a visual style.
                <br>
                (e.g., <i>cartoonish, photorealistic, dark, vibrant, greek, roman</i>)
                <br><br>
                Keep this style in mind throughout the experiment.
                <br><br>
            </li>
            <li>
                <strong>Choose Matching Images:</strong>
                <br><br>
                On the next page, you'll see sets of images.
                <br><br>
                In each set, select the image that best fits <u>your</u> chosen style.
                <br>
                (Use radio buttons or number keys 1-4).
                <br><br>
            </li>
            <li>
                <strong>Describe Your Style & Save:</strong>
                <br><br>
                After reviewing all images, you will be asked to briefly describe the <strong>style</strong> you had in mind.
                <br>
                (e.g., "vintage photo", "cartoonish", "like a roman fresco")
                <br><br>
                This description will help us understand your choices.
                <br><br>
                Then, submit your feedback.
                <br><br>
            </li>
        </ol>
        <!-- Goal section removed -->
    </div>

    <button id="start-button">Start</button>

    <script>
        document.getElementById('start-button')?.addEventListener('click', () => {
            const queryString = window.location.search;
            window.location.href = queryString ? `index.html${queryString}` : 'index.html';
        });
    </script>

</body>
</html>
